"use strict";(self.webpackChunkLHCReactAPP=self.webpackChunkLHCReactAPP||[]).push([[536],{3536:function(t,e,n){n.r(e);var a,i=n(7462),s=n(5671),r=n(3144),c=n(7326),u=n(9340),o=n(2963),l=n(1120),d=n(4942),b=n(7294),f=n(8216),h=n(6512),p=(n(2137),n(488)),v=n.n(p),m=n(7217);var y=(0,f.$j)((function(t){return{chatwidget:t.chatwidget}}))(a=function(t){(0,u.Z)(f,t);var e,n,a=(e=f,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,a=(0,l.Z)(e);if(n){var i=(0,l.Z)(this).constructor;t=Reflect.construct(a,arguments,i)}else t=a.apply(this,arguments);return(0,o.Z)(this,t)});function f(t){var e;return(0,s.Z)(this,f),e=a.call(this,t),(0,d.Z)((0,c.Z)(e),"state",{currentQuestion:1,is_valid:null,collectedData:{},collectedQuestion:[]}),e}return(0,r.Z)(f,[{key:"abstractClick",value:function(t,e,n){var a=this.state.collectedData,i=this.state.collectedQuestion,s=!1;"plain"==t["data-inline"]?""!=n.target.value&&(s=!0,a[t.name]=n.target.value):(s=!0,a[t.name]=t.value),!0===s&&-1===i.indexOf(e.seq)?i.push(e.seq):!1===s&&-1!==i.indexOf(e.seq)&&i.splice(i.indexOf(e.seq),1),this.setState({collectedData:a,collectedQuestion:i})}},{key:"submitSurvey",value:function(){var t=this;this.state.collectedData.survey_id=this.props.survey_id,this.state.collectedData.chat_id=this.props.chatwidget.getIn(["chatData","id"]),this.state.collectedData.hash=this.props.chatwidget.getIn(["chatData","hash"]),(0,h.q0)(this.state.collectedData).then((function(e){var n={is_valid:e.data.is_valid};n.feedback_text=e.data.result,t.setState(n)}))}},{key:"render",value:function(){var t=this,e=this.props.t,n=1,a=0;return(0,p.domToReact)(this.props.surveyOptions,{replace:function(t){t.attribs&&"voteoption"===t.name&&a++}}),b.createElement("div",null,!1===this.state.is_valid&&v()(this.state.feedback_text,{replace:function(e){if(e.attribs&&e.name&&"button"===e.name)return b.createElement("button",(0,i.Z)({type:"button"},e.attribs,{onClick:function(e){return t.setState({is_valid:null})}}))}}),!0===this.state.is_valid&&b.createElement("div",null,v()(this.state.feedback_text)),!0!==this.state.is_valid&&(0,p.domToReact)(this.props.surveyOptions,{replace:function(s){if(s.attribs&&"voteoption"===s.name){var r=t.state.currentQuestion!=n?"d-none":"";n++;var c=1==s.attribs["is-required"]&&-1===t.state.collectedQuestion.indexOf(s.attribs.seq),u="d-block pt-3"+(1==a?" text-center":""),o="btn btn-outline-secondary btn-sm"+(a>1?" float-end":"")+" btn-survey-submit";return b.createElement("div",(0,i.Z)({},s.attribs,{className:r}),(0,p.domToReact)(s.children,{replace:function(e){if(e.attribs){if(e.name&&"input"===e.name&&e.attribs.type&&"radio"==e.attribs.type){var n=Object.assign({},e.attribs);return b.createElement("input",(0,i.Z)({type:"radio"},e.attribs,{onChange:function(e){return t.abstractClick(n,s.attribs,e)}}))}if(e.name&&"textarea"===e.name)return n=Object.assign({},e.attribs),b.createElement("textarea",(0,i.Z)({style:{height:"55px"}},e.attribs,{onChange:function(e){return t.abstractClick(n,s.attribs,e)}}))}}}),b.createElement("div",{className:u},t.state.currentQuestion>1&&b.createElement("input",{type:"button",className:"btn btn-outline-secondary btn-sm btn-survey-prev",onClick:function(e){return t.setState({currentQuestion:t.state.currentQuestion-1})},value:e("button.back"),name:"Prev"}),a>t.state.currentQuestion&&b.createElement("input",{disabled:c,type:"button",className:"btn btn-outline-secondary btn-sm float-end btn-survey-next",onClick:function(e){return t.setState({currentQuestion:t.state.currentQuestion+1})},value:e("button.next"),name:"Next"}),a==t.state.currentQuestion&&b.createElement("input",{disabled:c,type:"button",className:o,onClick:function(e){return t.submitSurvey()},value:e("button.submit"),name:"Submit"})))}}}))}}]),f}(b.Component))||a;e.default=(0,m.Z)()(y)}}]);
//# sourceMappingURL=536.fd4e1eb5a4b9b5efa3cc.js.map